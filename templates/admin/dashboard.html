{% extends "admin/admin_base.html" %}

{% block title %}School Dashboard{% endblock %}

{% block content %}

<div class="flex">

    <!-- ================= MOBILE SIDEBAR TOGGLE ================= -->
    <button id="sidebarToggle"
        class="md:hidden fixed top-20 left-4 z-50 bg-blue-600 text-white px-3 py-2 rounded-lg shadow">
        â˜°
    </button>

    <!-- ================= SIDEBAR ================= -->
    <aside id="sidebar"
        class="fixed md:static top-0 left-0 h-full w-64 bg-blue-900 text-white transform -translate-x-full md:translate-x-0 transition-transform duration-300 z-40">

        <div class="p-5 text-center text-xl font-bold border-b border-blue-700">
            School Admin
        </div>

        <nav class="p-4 space-y-2">

            <a href="{% url 'blog_dashboard' %}" class="menu-link">ğŸ“˜ Blog Update</a>
            <a href="{% url 'student_list' %}" class="menu-link">ğŸ‘¨â€ğŸ“ Add Student</a>
            <a href="{% url 'teacher_list' %}" class="menu-link">ğŸ‘©â€ğŸ« Add Teacher</a>
            <a href="{% url 'id_card_list' %}" class="menu-link">ğŸªª ID Card Generate</a>
            <a href="{% url 'marksheet_list' %}" class="menu-link">ğŸ“„ Marksheet</a>
            <a href="{% url 'subject-list' %}" class="menu-link">ğŸ’° Fees Tracking</a>

            <a href="#" class="menu-link text-red-300 hover:bg-red-600">
                ğŸ” Password Change
            </a>

        </nav>
    </aside>

    <!-- ================= MAIN CONTENT ================= -->
    <main class="flex-1 md:ml-6 p-6 w-full">

        <!-- Header -->
        <div class="flex flex-col md:flex-row justify-between items-center mb-8 gap-4">
            <h1 class="text-3xl font-bold text-gray-800">Dashboard Overview</h1>
        </div>

        <!-- ================= STATS ================= -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10">

            <div class="stat-card">
                <h3>Students</h3>
                <p class="counter" data-target="1200">0</p>
            </div>

            <div class="stat-card">
                <h3>Teachers</h3>
                <p class="counter" data-target="85">0</p>
            </div>

            <div class="stat-card">
                <h3>Total Fees</h3>
                <p class="counter" data-target="450000">0</p>
            </div>

            <div class="stat-card">
                <h3>Certificates</h3>
                <p class="counter" data-target="320">0</p>
            </div>

        </div>

        <!-- ================= ACTION CARDS ================= -->
        <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6">

            <a href="{% url 'student_list' %}" class="action-card">â• Add Student</a>
            <a href="{% url 'teacher_list' %}" class="action-card">â• Add Teacher</a>
            <a href="{% url 'id_card_list' %}" class="action-card">ğŸªª Generate ID Card</a>
            <a href="{% url 'marksheet_list' %}" class="action-card">ğŸ“„ Generate Marksheet</a>
            <a href="{% url 'teacher_assignment_list' %}" class="action-card">ğŸ“„ teacher_assignment_list</a>
            
            <div class="action-card">ğŸ« School Certificate</div>
            <div class="action-card">ğŸ’° Fees Tracking</div>

        </div>

    </main>

</div>

<!-- ================= STYLES ================= -->
<style>
.menu-link {
    display: block;
    padding: 12px;
    border-radius: 8px;
    transition: 0.3s;
}
.menu-link:hover {
    background: #1d4ed8;
}

.stat-card {
    background: white;
    padding: 24px;
    border-radius: 16px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.05);
    transition: transform 0.3s;
}
.stat-card:hover {
    transform: translateY(-6px);
}
.stat-card h3 {
    color: #6b7280;
}
.stat-card p {
    font-size: 2rem;
    font-weight: bold;
    margin-top: 10px;
}

.action-card {
    background: white;
    padding: 24px;
    border-radius: 16px;
    text-align: center;
    font-weight: 600;
    transition: all 0.3s;
}
.action-card:hover {
    background: #2563eb;
    color: white;
    transform: scale(1.05);
}
</style>

<!-- ================= SCRIPT ================= -->
<script>
const sidebar = document.getElementById("sidebar");
const toggle = document.getElementById("sidebarToggle");

toggle.addEventListener("click", () => {
    sidebar.classList.toggle("-translate-x-full");
});

/* Counter Animation */
const counters = document.querySelectorAll('.counter');
counters.forEach(counter => {
    let start = 0;
    const target = +counter.dataset.target;
    const speed = target / 100;

    const updateCounter = () => {
        start += speed;
        if (start < target) {
            counter.innerText = Math.floor(start);
            requestAnimationFrame(updateCounter);
        } else {
            counter.innerText = target;
        }
    };
    updateCounter();
});
</script>

{% endblock %}
